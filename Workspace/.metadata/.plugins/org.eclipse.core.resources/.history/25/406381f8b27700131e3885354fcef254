import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;


public class CubeCalculator extends JPanel {
	private JLabel numLabel;
	private int power;

	public CubeCalculator(int power) {
		super();

		this.power = power;
		
		this.setLayout(new GridLayout(2, 1));

		this.numLabel = new JLabel("0", JLabel.RIGHT);
		this.add(this.numLabel);

		JPanel buttonPanel = new JPanel();
		buttonPanel.setLayout(new GridLayout(4, 3));

		String[] buttonLabels = {"9", "8", "7", "6", "5", "4", "3", "2", "1", "Clear", "0", "Cube"};
		
		/*
		 * The layout of the buttons will be (approximately):
		 *   9   8   7
		 *   6   5   4
		 *   3   2   1
		 * Clear 0 Cube
		 */

		for (String label : buttonLabels) {
			JButton button = new JButton(label);
			button.addActionListener(new BHandler());

			buttonPanel.add(button);
		}

		this.add(buttonPanel);
	}
	
	private void reset() {
		this.numLabel.setText("0");
	}
	
	private class BHandler implements ActionListener {

		@Override
		public void actionPerformed(ActionEvent e) {
			switch (e.getActionCommand()) {
			case "Clear":
				reset();
				break;

			case "Cube":
				numLabel.setText(new Double(Math.pow(Double.parseDouble(numLabel.getText()), 3)).toString());
				break;

			default:
				if (numLabel.getText().equals("0")) {
					numLabel.setText(e.getActionCommand());
				}
				
				else {
					numLabel.setText(numLabel.getText() + e.getActionCommand());
				}
			}

		}

	}

	public static void main(String[] args) {
		CubeCalculator calc = new CubeCalculator(3);
		
		JTabbedPane tp = new JTabbedPane();
		
		tp.addTab("Cube", calc);
		tp.addTab("Square", new CubeCalculator(2));
		tp.addTab("Fourth Power", new CubeCalculator(4));

		JFrame window = new JFrame("Cube Calculator");
		window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		window.setSize(500, 450);
		window.add(tp);
		window.setVisible(true);

	}

}
